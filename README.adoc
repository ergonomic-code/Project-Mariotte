:toc: macro
:toc-levels: 4
:toc-title: Содержение
ifdef::env-github[]
:note-caption: :information_source:
endif::[]

= Project Mariotte

Проект Мариотт - это демо проект https://azhidkov.pro/ergo-approach/landing/[Эргономичного подхода] на примере сервиса бронирования номеров в отелях.

toc::[]

== Карта проекта

. Код иллюстрирующий Эргономичный подход
.. Тестирование
... Тесты на поведение
... Эффективный запуск реального PostgreSQL
... Доменно-спецефичный матчер
... Генерация случайных тестовых данных
... ObjectMothers
.. Неизменяемая модель данных
.. Структурный дизайн
.. Модель на базе диаграммы эффектов
... Простая операция
... Сложная операция
... Простой ресурс
... Сложный ресурс
.. Кодирование
... Обход проблемы интеграции Spring Transactions с Kotlin Result
... "Очевидизация" вариантов ответов эндпоинта

. Прочие "Points of interest"
.. Верификация Json-схем
.. Problem Details
... ErrorResponse
... UnhandledExceptionsHandler
.. PostgreSQL generate_series
.. Пессимистичные блокировки в Spring Data JDBC
.. Kotlin value-класс
.. Реестр Json-схем

== "Техническое задание"

* Сервис должен обеспечивать бронирования номеров в разных отелях;
* Сервис должен поддерживать типы номероров, определённых международным стандартом ISO 404:404 - люкс и полулюкс;
* Бронировние определяет только тип номера, но не конкрентный номер.
Конкретный номер выбирает администратор при заселении гостя;
* Сервис должен исключать овербукинг - создание большего количества броней номеров определённого типа в одном отеле за определённую дату, чем есть в целом номеров данного типа в отеле;
* Сервис должен недопускать бронирования, начинающиеся ранее следующих суток относительно момента времени запроса на бронирование.

== Системная аналитика

=== Модель предметной области

image::docs/images/ER.drawio.svg[]

[NOTE]
====
Модель предметной области представлена https://azhidkov.pro/microposts/23/11/immutable-relation-data-model-v2/[Эргономичной нотации ER-модели]
====

=== HTTP API

=== Диаграмма эффектов

=== Диаграмма классов

=== Структурная схема

=== Структура пакетов

== Требования к окружению

== Запуск тестов

== Сборка проекта

== Запуск проекта

=== Примеры запросов